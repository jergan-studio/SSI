<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VORD VOID Results</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #12002a, #000);
  color: #aee7ff;
  font-family: Arial, sans-serif;
}

header {
  padding: 15px;
  border-bottom: 1px solid #222;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

header input {
  flex: 1;
  padding: 12px;
  border-radius: 20px;
  border: none;
}

header button {
  padding: 12px 18px;
  border-radius: 20px;
  border: none;
  background: #5a7cff;
  color: white;
  cursor: pointer;
}

.ai {
  margin: 20px;
  padding: 15px;
  border: 2px solid #5a7cff;
  box-shadow: 0 0 25px #5a7cff;
}

.result {
  margin: 15px 20px;
  padding: 15px;
  background: #141730;
  border-radius: 10px;
  cursor: pointer;
  position: relative;
}

.result:hover {
  background: #1c214a;
}

.result img {
  width: 16px;
  height: 16px;
  vertical-align: middle;
  margin-right: 6px;
}

.preview {
  display: none;
  position: absolute;
  right: 15px;
  top: 15px;
  width: 260px;
  background: #000;
  border: 1px solid #5a7cff;
  padding: 10px;
  z-index: 10;
}

.result:hover .preview {
  display: block;
}

.preview iframe {
  width: 100%;
  height: 140px;
  border: none;
  background: #000;
}

.preview p {
  font-size: 0.8rem;
  opacity: 0.7;
}
</style>
</head>
<body>

<header>
  <input id="searchBox">
  <button id="comBtn">Go to .com</button>
</header>

<div class="ai" id="ai"></div>
<div id="results"></div>

<script>
const params = new URLSearchParams(location.search);
const query = params.get("q") || "";
const searchBox = document.getElementById("searchBox");
searchBox.value = query;

const resultsDiv = document.getElementById("results");

function aiThink() {
  ai.textContent =
    `VORD VOID THINKS: "${query}" may lead you to websites, tools, or references related to this topic.`;
}

function addResult(title, desc, url) {
  const domain = new URL(url).origin;
  const favicon = domain + "/favicon.ico";

  const div = document.createElement("div");
  div.className = "result";

  div.innerHTML = `
    <h3>
      <img src="${favicon}" onerror="this.style.display='none'">
      ${title}
    </h3>
    <p>${desc}</p>

    <div class="preview">
      <iframe src="${url}"></iframe>
      <p>Preview (if allowed)</p>
    </div>
  `;

  div.onclick = () => {
    window.open(url, "_blank");
  };

  resultsDiv.appendChild(div);
}

// Open the search as (search).com
const comBtn = document.getElementById("comBtn");
comBtn.onclick = () => {
  const queryText = searchBox.value.trim();
  if (!queryText) return alert("Enter a search first!");
  const domain = queryText.replace(/\s+/g, "").toLowerCase() + ".com";
  window.open("https://" + domain, "_blank");
};

async function run() {
  aiThink();

  const res = await fetch(
    `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1`
  );
  const data = await res.json();

  if (data.AbstractURL) {
    addResult(
      data.Heading || query,
      data.AbstractText || "Instant answer",
      data.AbstractURL
    );
  }

  data.RelatedTopics.slice(0, 5).forEach(t => {
    if (t.FirstURL) {
      addResult(
        t.Text.split(" - ")[0],
        t.Text,
        t.FirstURL
      );
    }
  });
}

searchBox.addEventListener("keydown", e => {
  if (e.key === "Enter") {
    location.href =
      "results.html?q=" + encodeURIComponent(searchBox.value);
  }
});

run();
</script>

</body>
</html>
