<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VORD VOID Results</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #12002a, #000);
  color: #aee7ff;
  font-family: Arial, sans-serif;
}

header {
  padding: 15px;
  display: flex;
  gap: 10px;
  border-bottom: 1px solid #222;
}

input, select, button {
  padding: 10px;
  border-radius: 15px;
  border: none;
}

.ai {
  margin: 20px;
  padding: 15px;
  border: 2px solid #5a7cff;
  box-shadow: 0 0 25px #5a7cff;
}

.result {
  margin: 15px;
  padding: 15px;
  background: #141730;
  border-radius: 10px;
}
</style>
</head>
<body>

<header>
  <input id="searchBox">
  <select id="engine">
    <option value="duck">DuckDuckGo</option>
    <option value="local">Local</option>
  </select>
  <button onclick="saveSearch()">‚≠ê Save</button>
</header>

<div class="ai" id="ai"></div>
<div id="results"></div>

<script>
const params = new URLSearchParams(location.search);
const query = params.get("q") || "";
searchBox.value = query;

const LOCAL = [
  { title: "VORD VOID", desc: "AI search engine", url: "#" },
  { title: "Square Dodge", desc: "2.5D game", url: "#" }
];

function currentUser() {
  const u = localStorage.getItem("vv_current");
  if (!u) return null;
  return JSON.parse(localStorage.getItem("vv_users"))
    .find(x => x.username === u);
}

function saveSearch() {
  const users = JSON.parse(localStorage.getItem("vv_users"));
  const user = currentUser();
  if (!user) return alert("Login first");

  user.saved.push(query);
  localStorage.setItem("vv_users", JSON.stringify(users));
  alert("Search saved");
}

function aiThink(snips) {
  return snips.length
    ? `VORD VOID THINKS: "${query}" relates to ${snips.join(", ")}`
    : `VORD VOID found no strong signals.`;
}

async function run() {
  let snippets = [];
  results.innerHTML = "";

  if (engine.value === "duck") {
    const r = await fetch(
      `https://api.duckduckgo.com/?q=${query}&format=json&no_html=1`
    );
    const d = await r.json();
    if (d.AbstractText) {
      snippets.push(d.Heading);
      results.innerHTML += `
        <div class="result">
          <h3>${d.Heading}</h3>
          <p>${d.AbstractText}</p>
        </div>`;
    }
  }

  if (engine.value === "local") {
    LOCAL.filter(x =>
      x.title.toLowerCase().includes(query.toLowerCase())
    ).forEach(r => {
      snippets.push(r.title);
      results.innerHTML += `
        <div class="result">
          <h3>${r.title}</h3>
          <p>${r.desc}</p>
        </div>`;
    });
  }

  ai.textContent = aiThink(snippets);
}

searchBox.addEventListener("keydown", e => {
  if (e.key === "Enter")
    location.href = `results.html?q=${encodeURIComponent(searchBox.value)}`;
});

engine.onchange = run;
run();
</script>

</body>
</html>
